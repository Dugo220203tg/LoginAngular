<!-- register.component.html -->
<div class="login-container">
  <form class="login-form" [formGroup]="registerForm" (ngSubmit)="register()">
    <div class="form-header">
      <h2>Create Account</h2>
      <p>Please enter your details to register</p>
    </div>

    <div *ngFor="let error of errors" class="validation-error">
      <div class="error-message">{{ error.description }}</div>
    </div>

    <div class="form-group">
      <label>Full Name</label>
      <div class="input-with-icon">
        <i class="fas fa-user"></i>
        <input 
          type="text"
          placeholder="Enter your full name"
          formControlName="userName"
        >
      </div>
    </div>

    <div class="form-group">
      <label>Email</label>
      <div class="input-with-icon">
        <i class="fas fa-envelope"></i>
        <input 
          type="email"
          placeholder="Enter your email"
          formControlName="email"
        >
      </div>
    </div>

    <!-- <div class="form-group">
      <label>Roles</label>
      <div class="input-with-icon">
        <i class="fas fa-users"></i>
        <select multiple formControlName="roles" class="role-select">
          <option *ngFor="let role of (role$ | async)" [value]="role.roleName">
            {{ role.roleName }}
          </option>
        </select>
      </div>
    </div> -->

    <div class="form-group">
      <label>Password</label>
      <div class="input-with-icon">
        <i class="fas fa-lock"></i>
        <input 
          [type]="passwordHide ? 'password' : 'text'"
          placeholder="Enter your password"
          formControlName="password"
        >
        <button 
          type="button"
          class="password-toggle"
          (click)="passwordHide = !passwordHide"
        >
          <i [class]="passwordHide ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
        </button>
      </div>
    </div>

    <div class="form-group">
      <label>Confirm Password</label>
      <div class="input-with-icon">
        <i class="fas fa-lock"></i>
        <input 
          [type]="confirmPasswordHide ? 'password' : 'text'"
          placeholder="Confirm your password"
          formControlName="confirmPassword"
        >
        <button 
          type="button"
          class="password-toggle"
          (click)="confirmPasswordHide = !confirmPasswordHide"
        >
          <i [class]="confirmPasswordHide ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
        </button>
      </div>
    </div>

    <span 
      class="password-mismatch"
      *ngIf="registerForm.hasError('passwordMismatch') && 
             registerForm.get('confirmPassword')?.dirty && 
             registerForm.get('confirmPassword')?.touched"
    >
      Passwords don't match
    </span>

    <button type="submit" class="login-button" [disabled]="registerForm.invalid">
      Register
    </button>

    <div class="register-prompt">
      Already have an account? <a routerLink="/login">Sign in</a>
    </div>
  </form>
</div>